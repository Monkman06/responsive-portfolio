<!DOCTYPE html>
<html lang>
<title>Monks Hangman</title>
 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

<body background="coast.jpg">
 <div class="panel panel-danger">
  <div class="panel-heading">
   <h3 class="panel=title"></h3>
  </div>
<div class="panel-">
 <h1 class="chrome"><center>Movie Match</center></h1>
 <h3 class="dreams"><center>Hangman</center></h3>
</div>
</div>
</div>
    
    <div id="game-section">
     <center><p>Press any key to get started!</p></center>
  <div id="current-word-section"><center>
<h3 class="section-title">Wins</h3>
<div id="wins"></div></center>
</div>
<div id="current-word-section"><center> 
<h3 class="section-title"><center> Current Word</center></h3>
<div id="current-word"></div></div></center>

<div id="guesses-remaining-section">
 <center>
  <h3 id="section-title">Numbers of Guesses Remaining</h3>

  <div id="guesses-remaining"></div>
  </center>
  
  <div id="guessed-letters-section">
    <center>
    <h3 class="section-title"> Letters Already Guessed</h3>
    <div id="guessed-letters"></div></center>
  </div>
  </div>
  </div>
  </div>
  <br>

<img class="img-responsive" src="goodspeed.jpg" alt="" height="110" width="220">
<img class="img-responsive" src="kong.jpg" alt="" height="110" width="220">
<img class="img-responsive" src="luther.jpg" alt="" height="110" width="220">
<img class="img-responsive" src="moon.jpg" alt="" height="110" width="220">
<img class="img-responsive" src="train.jpg" alt="" height="110" width="220">
<img class="img-responsive" src="vamp.jpg" alt="" height="110" width="220">
<img class="img-responsive" src="thx.jpg" alt="" height="110" width="220">

    <script type="text/javascript"> 
    var hangmanGame = {   // word selction object
  wordsToPick: {
    "war of the worlds" : {
    }, 
    "the warriors" : {
    }, 
    "trip to the moon" : {
    }, 
    "the rock" : {
    }, 
    "king kong" : {
    }, 
    "thx 1138" : {
    }, 
    "nosferatu" : {
    }, 
    "the hangover" : {
    },
    "inception" : {
    }, 
    "batman" : {
    }, 
    "jurrasic world" : {
    }
  },
  wordInPlay: null,
  lettersOfTheWord: [],
  matchedLetters: [],
  guessedLetters: [],
  guessesLeft: 0,
  totalGuesses: 0,
  letterGuessed: null,
  wins: 0,
  setupGame: function() {
    // ---Pick a random word
    var objKeys = Object.keys(this.wordsToPick);
    this.wordInPlay = objKeys[Math.floor(Math.random() * objKeys.length)];

    this.lettersOfTheWord = this.wordInPlay.split('');
    this.rebuildWordView();
    this.processUpdateTotalGuesses();
  },
  updatePage: function(letter) {
    if (this.guessesLeft == 0){
      this.restartGame();
    }else{
      this.updateGuesses(letter);

      this.updateMatchedLetters(letter);

      this.rebuildWordView();

      if (this.updateWins() == true){
        this.restartGame();
      }
    }

  },
  updateGuesses: function(letter){
    //if the letter is not in the guessedLetters array
    //and
    //the letter is not in the lettersOfTheWord array
    //then
    //make guesses go down

    if ((this.guessedLetters.indexOf(letter) == -1) && (this.lettersOfTheWord.indexOf(letter) == -1)){
      
      this.guessedLetters.push(letter);

      this.guessesLeft--;

      document.querySelector('#guesses-remaining').innerHTML = this.guessesLeft;

      document.querySelector("#guessed-letters").innerHTML = this.guessedLetters.join(', ');
    }
  },
  processUpdateTotalGuesses: function() {
    this.totalGuesses = this.lettersOfTheWord.length + 5;
    this.guessesLeft = this.totalGuesses;

    // ---Render the guesses left
    document.querySelector('#guesses-remaining').innerHTML = this.guessesLeft;
  },
  updateMatchedLetters: function(letter){
    for (var i = 0; i < this.lettersOfTheWord.length; i++) {
      if ((letter === this.lettersOfTheWord[i]) && (this.matchedLetters.indexOf(letter) == -1)){
        this.matchedLetters.push(letter);
      };
    };
  },
  rebuildWordView: function() {
    var wordView = "";

    for(var i=0; i < this.lettersOfTheWord.length; i++){
      if (this.matchedLetters.indexOf(this.lettersOfTheWord[i]) != -1){
        wordView += this.lettersOfTheWord[i];       
      }else{
        wordView += '&nbsp;_&nbsp;';
      }
    }

    document.querySelector('#current-word').innerHTML = wordView;

  },
  restartGame : function(){
    document.querySelector('#guessed-letters').innerHTML = '';
    this.wordInPlay = null;
    this.lettersOfTheWord = [];
    this.matchedLetters = [];
    this.guessedLetters = [];
    this.guessesLeft = 0;
    this.totalGuesses = 0;
    this.letterGuessed = null;
    this.setupGame();
    this.rebuildWordView();
  },
  updateWins: function() {

    //this won't work for words with double or triple letters
      //var lettersOfTheWordClone = this.lettersOfTheWord.slice(); //clones the array
      //this.matchedLetters.sort().join('') == lettersOfTheWordClone.sort().join('')

    if (this.matchedLetters.length == 0){
      var win = false;
    }else{
      var win = true
    }
    
    for (var i=0; i < this.lettersOfTheWord.length; i++){
      if (this.matchedLetters.indexOf(this.lettersOfTheWord[i]) == -1){
        win = false;
      }
    }
    if (win == true){
      this.wins =  this.wins + 1;
      
      document.querySelector('#wins').innerHTML = this.wins;

      return true;
    }else{
      return false;
    }
  }
};

hangmanGame.setupGame();

document.onkeyup = function(event) {
  hangmanGame.letterGuessed = String.fromCharCode(event.keyCode).toLowerCase();
  hangmanGame.updatePage(hangmanGame.letterGuessed);
}
</script>
 </body>
 </html>